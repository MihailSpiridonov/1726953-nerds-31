const openPopup=document.querySelector(".contacts-btn"),popup=document.querySelector(".popup"),closePopup=popup.querySelector(".popup-btn-close"),formPopup=popup.querySelector("popup-form"),loginPopup=popup.querySelector(".popup-login"),emailPopup=popup.querySelector(".popup-email"),btnPopup=popup.querySelector(".popup-btn");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(p){isStorageSupport=!1}openPopup.addEventListener("click",function(p){p.preventDefault(),popup.classList.remove("visually-hidden"),popup.classList.add("modal-show"),storage?(loginLogin.value=storage,loginPassword.focus()):loginPopup.focus()}),closePopup.addEventListener("click",function(p){p.preventDefault(),popup.classList.add("visually-hidden"),popup.classList.remove("modal-error")}),formPopup.addEventListener("submit",function(p){loginPopup.value&&emailPopup.value?isStorageSupport&&localStorage.setItem("login",loginPopup.value):(p.preventDefault(),popup.classList.add("modal-error"))});